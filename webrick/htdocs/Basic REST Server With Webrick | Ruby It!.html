<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head profile="http://gmpg.org/xfn/11">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Basic REST Server With Webrick | Ruby It!</title>
		<link rel="pingback" href="https://rubyit.wordpress.com/xmlrpc.php">
		<link rel="alternate" type="application/rss+xml" title="Ruby It! » Feed" href="https://rubyit.wordpress.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Ruby It! » Comments Feed" href="https://rubyit.wordpress.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Ruby It! » Basic REST Server With&nbsp;Webrick Comments Feed" href="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/feed/">
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" id="all-css-0" href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/a.css" type="text/css" media="all">
<link rel="stylesheet" id="print-css-0" href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/print.css" type="text/css" media="print">
<!--[if IE]>
<link rel='stylesheet' id='notepad-ie-css'  href='https://s0.wp.com/wp-content/themes/pub/notepad/ie.css?m=1273001598g&#038;ver=4.2-alpha-31095' type='text/css' media='all' />
<![endif]-->
<!--[if lte IE 6]>
<link rel='stylesheet' id='notepad-ie6-css'  href='https://s0.wp.com/wp-content/themes/pub/notepad/ie6.css?m=1273001598g&#038;ver=4.2-alpha-31095' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="all-css-4" href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/a_002.css" type="text/css" media="all">
<script type="text/javascript">
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"Your subscription did not succeed, please try again with a valid email address."};
/* ]]> */
</script><link type="text/css" rel="stylesheet" href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/mytube.css"><script src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/mutationObserver.js"></script><script src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/mytube.js"></script><mytubeelement data="{&quot;bundle&quot;:{&quot;label_delimitor&quot;:&quot;:&quot;,&quot;percentage&quot;:&quot;%&quot;,&quot;smart_buffer&quot;:&quot;Smart Buffer&quot;,&quot;start_playing_when_buffered&quot;:&quot;Start playing when buffered&quot;,&quot;sound&quot;:&quot;Sound&quot;,&quot;desktop_notification&quot;:&quot;Desktop Notification&quot;,&quot;continuation_on_next_line&quot;:&quot;-&quot;,&quot;loop&quot;:&quot;Loop&quot;,&quot;only_notify&quot;:&quot;Only Notify&quot;,&quot;estimated_time&quot;:&quot;Estimated Time&quot;,&quot;global_preferences&quot;:&quot;Global Preferences&quot;,&quot;no_notification_supported_on_your_browser&quot;:&quot;No notification style supported on your browser version&quot;,&quot;video_buffered&quot;:&quot;Video Buffered&quot;,&quot;buffered&quot;:&quot;Buffered&quot;,&quot;hyphen&quot;:&quot;-&quot;,&quot;buffered_message&quot;:&quot;The video has been buffered as requested and is ready to play.&quot;,&quot;not_supported&quot;:&quot;Not Supported&quot;,&quot;on&quot;:&quot;On&quot;,&quot;off&quot;:&quot;Off&quot;,&quot;click_to_enable_for_this_site&quot;:&quot;Click to enable for this site&quot;,&quot;desktop_notification_denied&quot;:&quot;You have denied permission for desktop notification for this site&quot;,&quot;notification_status_delimitor&quot;:&quot;;&quot;,&quot;error&quot;:&quot;Error&quot;,&quot;adblock_interferance_message&quot;:&quot;Adblock (or similar extension) is known to interfere with SmartVideo. Please add this url to adblock whitelist.&quot;,&quot;calculating&quot;:&quot;Calculating&quot;,&quot;waiting&quot;:&quot;Waiting&quot;,&quot;will_start_buffering_when_initialized&quot;:&quot;Will start buffering when initialized&quot;,&quot;will_start_playing_when_initialized&quot;:&quot;Will start playing when initialized&quot;,&quot;completed&quot;:&quot;Completed&quot;,&quot;buffering_stalled&quot;:&quot;Buffering is stalled. Will stop.&quot;,&quot;stopped&quot;:&quot;Stopped&quot;,&quot;hr&quot;:&quot;Hr&quot;,&quot;min&quot;:&quot;Min&quot;,&quot;sec&quot;:&quot;Sec&quot;,&quot;any_moment&quot;:&quot;Any Moment&quot;,&quot;popup_donate_to&quot;:&quot;Donate to&quot;,&quot;extension_id&quot;:null},&quot;prefs&quot;:{&quot;desktopNotification&quot;:true,&quot;soundNotification&quot;:true,&quot;logLevel&quot;:0,&quot;enable&quot;:true,&quot;loop&quot;:false,&quot;hidePopup&quot;:false,&quot;autoPlay&quot;:false,&quot;autoBuffer&quot;:false,&quot;autoPlayOnBuffer&quot;:false,&quot;autoPlayOnBufferPercentage&quot;:42,&quot;autoPlayOnSmartBuffer&quot;:true,&quot;quality&quot;:&quot;default&quot;,&quot;fshd&quot;:false,&quot;onlyNotification&quot;:false,&quot;enableFullScreen&quot;:true,&quot;saveBandwidth&quot;:false,&quot;hideAnnotations&quot;:false,&quot;turnOffPagedBuffering&quot;:false}}" event="preferencesUpdated" id="myTubeRelayElementToPage"></mytubeelement><mytubeelement data="{&quot;loadBundle&quot;:true}" event="relayPrefs" id="myTubeRelayElementToTab"></mytubeelement>
<script type="text/javascript" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/a.js"></script>
<link rel="stylesheet" id="all-css-0" href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/style.css" type="text/css" media="all">
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='https://s2.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563g&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://rubyit.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml"> 
<link rel="next" title="Ruby and ARGF" href="https://rubyit.wordpress.com/2011/07/25/ruby-and-argf/">
<meta name="generator" content="WordPress.com">
<link rel="canonical" href="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/">
<link rel="shortlink" href="http://wp.me/p1IU83-6">
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/1.0/?format=json&amp;url=https%3A%2F%2Frubyit.wordpress.com%2F2011%2F07%2F25%2Fbasic-rest-server-with-webrick%2F&amp;for=wpcom-auto-discovery"><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/1.0/?format=xml&amp;url=https%3A%2F%2Frubyit.wordpress.com%2F2011%2F07%2F25%2Fbasic-rest-server-with-webrick%2F&amp;for=wpcom-auto-discovery">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Basic REST Server With Webrick">
<meta property="og:url" content="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/">
<meta property="og:description" content="Ruby provides a lot of nifty tools for getting things up and running quickly. Recently I've been looking a lot into the standard Ruby library to see what interesting parts I could use to build my o...">
<meta property="article:published_time" content="2011-07-25T00:17:25+00:00">
<meta property="article:modified_time" content="2011-07-25T00:17:25+00:00">
<meta property="article:author" content="https://rubyit.wordpress.com/author/onteria/">
<meta property="og:site_name" content="Ruby It!">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-test-page.png">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-servlet-failure.png">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-servlet-output.png">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-hservice-no-method.png">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-hservice-greet-no-arg.png">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-hservice-greet-one-arg.png">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-hservice-greet-mult-arg.png">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-invalid-class.png">
<meta property="og:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-invalid-method.png">
<meta property="og:locale" content="en_US">
<meta name="twitter:site" content="@wordpressdotcom">
<meta name="twitter:image" content="https://rubyit.files.wordpress.com/2011/07/webrick-test-page.png?w=240">
<meta name="twitter:card" content="summary">
<meta property="fb:app_id" content="249643311490">
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom">
<link rel="shortcut icon" type="image/x-icon" href="https://s2.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48">
<link rel="icon" type="image/x-icon" href="https://s2.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48">
<link rel="apple-touch-icon-precomposed" href="https://s0.wp.com/i/webclip.png">
<link rel="openid.server" href="https://rubyit.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="https://rubyit.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="https://rubyit.wordpress.com/osd.xml" title="Ruby It!">
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com">
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css">
			.recentcomments a {
				display: inline !important;
				padding: 0 !important;
				margin: 0 !important;
			}

			table.recentcommentsavatartop img.avatar, table.recentcommentsavatarend img.avatar {
				border: 0px;
				margin: 0;
			}

			table.recentcommentsavatartop a, table.recentcommentsavatarend a {
				border: 0px !important;
				background-color: transparent !important;
			}

			td.recentcommentsavatarend, td.recentcommentsavatartop {
				padding: 0px 0px 1px 0px;
				margin: 0px;
			}

			td.recentcommentstextend {
				border: none !important;
				padding: 0px 0px 2px 10px;
			}

			.rtl td.recentcommentstextend {
				padding: 0px 10px 2px 0px;
			}

			td.recentcommentstexttop {
				border: none;
				padding: 0px 0px 0px 10px;
			}

			.rtl td.recentcommentstexttop {
				padding: 0px 10px 0px 0px;
			}
		</style>
		<meta name="application-name" content="Ruby It!"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Because you can"><meta name="msapplication-task" content="name=Subscribe;action-uri=https://rubyit.wordpress.com/feed/;icon-uri=https://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s2.wp.com/i/favicon.ico"><meta name="title" content="Basic REST Server With&nbsp;Webrick | Ruby It! on WordPress.com">
<meta name="description" content="Ruby provides a lot of nifty tools for getting things up and running quickly. Recently I've been looking a lot into the standard Ruby library to see what interesting parts I could use to build my own creations. One of the common needs for a lot of the web based world is a web service…">
<link href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/shCore.css" type="text/css" rel="stylesheet"><link href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/shThemeDefault.css" type="text/css" rel="stylesheet"><style type="text/css" id="syntaxhighlighteranchor"></style>
	<link rel="stylesheet" type="text/css" id="gravatar-card-css" href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/services.css"></head>
	<body class="single single-post postid-6 single-format-standard mp6 customizer-styles-applied highlander-enabled highlander-light">
		<div id="pagewrapper">
				<div id="header">
			<h1 id="logo">
				<a href="https://rubyit.wordpress.com/">Ruby It!</a>
			</h1>
			<p class="description">Because you can</p>

			<p class="socialmedia">
				
				
				
				
							</p><!-- socialmedia -->

			<div class="menu"><ul class="menu"><li><a href="https://rubyit.wordpress.com/">Home</a></li></ul></div>

		</div>
		<!--/header -->

		
		<div id="wrapper">


	<div id="content">

		<p class="post-nav">
			<span class="previous">
							</span>
			<span class="next">
				<a href="https://rubyit.wordpress.com/2011/07/25/ruby-and-argf/" rel="next">Ruby and ARGF</a>			</span>
		</p>

	
		<div class="post-6 post type-post status-publish format-standard hentry category-web tag-rest tag-ruby tag-web-service tag-webrick" id="post-6">
			<h2 class="post-title">
				Basic REST Server With&nbsp;Webrick			</h2>
			<p class="post-date">
				July 25, 2011			</p>
			<p class="post-data">
				<span class="postauthor">
					<a href="http://onteria.wordpress.com/" title="Visit onteria’s website" rel="author external">onteria</a>				</span>
				<span class="postcategory">
					<a href="https://rubyit.wordpress.com/category/web/" rel="category tag">Web</a>				</span>
				<span class="posttag"><a href="https://rubyit.wordpress.com/tag/rest/" rel="tag">rest</a>, <a href="https://rubyit.wordpress.com/tag/ruby/" rel="tag">ruby</a>, <a href="https://rubyit.wordpress.com/tag/web-service/" rel="tag">web service</a>, <a href="https://rubyit.wordpress.com/tag/webrick/" rel="tag">webrick</a></span>				<span class="postcomment">
					<a href="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/#respond" title="Comment on Basic REST Server With&nbsp;Webrick">Leave a comment</a>				</span>
							</p>
			<div class="post-content">
				<p>
Ruby provides a lot of nifty tools for getting things up and running 
quickly. Recently I’ve been looking a lot into the standard Ruby library
 to see what interesting parts I could use to build my own creations. 
One of the common needs for a lot of the web based world is a web 
service to expose an API to clients. Thinking it through I came up with a
 solution using Webrick and message passing to create a RESTful JSON web
 service. As this uses JSON, you will need to install the JSON gem. This
 can be done through the following command:
</p>
<div><div id="highlighter_834008" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">[ONTERIA] &gt; gem install json</code></div></div></td></tr></tbody></table></div></div>
<p>
First off a simple HTTP server is required. Webrick provides just that. I borrowed a code snippet from <a href="http://microjet.ath.cx/webrickguide/html/html_webrick.html" title="Gnome's Guide to WEBrick" target="_blank">Gnome’s Guide to WEBrick</a>, a highly recommended read for those who wish to look more into using Webrick. The base code gives this:
</p>
<div><div id="highlighter_40571" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">require </code><code class="ruby string">'webrick'</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="ruby plain">include WEBrick</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">start_webrick(config = {})</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">config.update(:Port =&gt; </code><code class="ruby constants">9955</code><code class="ruby plain">)&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">server = HTTPServer.</code><code class="ruby keyword">new</code><code class="ruby plain">(config)</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">yield</code> <code class="ruby plain">server </code><code class="ruby keyword">if</code> <code class="ruby plain">block_given?</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">[</code><code class="ruby string">'INT'</code><code class="ruby plain">, </code><code class="ruby string">'TERM'</code><code class="ruby plain">].</code><code class="ruby keyword">each</code> <code class="ruby plain">{|signal| </code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">trap(signal) {server.shutdown}</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">}</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">server.start</code></div><div class="line number13 index12 alt2"><code class="ruby keyword">end</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="ruby plain">start_webrick(:DocumentRoot =&gt; </code><code class="ruby string">'C:\\MyWebsite'</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>
This creates a server that listens on port 9955, with a document root of <code>C:\MyWebsite</code>. In the document root folder is a single file called <code>index.html</code> which has the following HTML code:
</p>
<div><div id="highlighter_683993" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">html</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">head</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">title</code><code class="xml plain">&gt;My Webpage&lt;/</code><code class="xml keyword">title</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">head</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">body</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">h1</code><code class="xml plain">&gt;Welcome to my website!&lt;/</code><code class="xml keyword">h1</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">body</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">html</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>
After running the script, navigating to the site in Firefox produces the following:
</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-test-page.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-test-page.png" alt="" title="Webrick Test Result" class="alignnone size-full wp-image-7"></a></p>
<p>
So this gives us a basic webserver. However since this is going to be a 
RESTful web service, things need to be a bit more dynamic. In order to 
interface with dynamically generated content, Webrick utilizes servlets.
 The skeleton of a basic servlet is as follows:
</p>
<div><div id="highlighter_731101" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">RestServlet &lt; HTTPServlet::AbstractServlet</code></div><div class="line number2 index1 alt1"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
<p>
The servlet inherits from <code>HTTPServlet::AbstractServlet</code>, but
 doesn’t do much as is. However, it can be attached to a certain URL. 
Since this is meant to be a stand alone web service, we’ll attach it to 
the root path:
</p>
<div><div id="highlighter_322052" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">RestServlet &lt; HTTPServlet::AbstractServlet</code></div><div class="line number2 index1 alt1"><code class="ruby keyword">end</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="ruby plain">start_webrick { | server |</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">server.mount(</code><code class="ruby string">'/'</code><code class="ruby plain">, RestServlet)</code></div><div class="line number6 index5 alt1"><code class="ruby plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>
Now as is, running this code gives a generic 404:
</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-servlet-failure.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-servlet-failure.png" alt="" title="404 Failure" class="alignnone size-full wp-image-12"></a></p>
<p>
This is because Webrick is expecting a response to send back to the 
client. Since no response has been setup, a 404 is returned. When 
Webrick is set to utilize a servlet, it references specific methods 
depending on the type of request. In this case a <code>GET</code> request is being performed. In order to handle this get request as a servlet, the <code>do_GET</code> method must be implemented:
</p>
<div><div id="highlighter_373147" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">RestServlet &lt; HTTPServlet::AbstractServlet</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">do_GET(req,resp)</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = </code><code class="ruby string">'Hello World'</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::</code><code class="ruby constants">OK</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number6 index5 alt1"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
<p>
The <code>do_GET</code> method here takes two objects as arguments. The 
first is the client request, and the second is the server response, 
which is used to build up what gets sent back to the client. In this 
case, <code>req</code> is not used and the response body is set to a 
simple string. Afterwards an HTTPStatus of OK (converted to status code 
200) is setup for Webrick to respond with the proper status. This will 
finally produce something that the browser can render:
</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-servlet-output.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-servlet-output.png" alt="" title="Servlet Output" class="alignnone size-full wp-image-13"></a></p>
<p>
With this being a RESTful service, the actual URL is often used to map to specific method calls. In this case, we’ll make a <code>HelloService</code>
 REST service that has a default response, and one that takes arguments.
 The class that will produce the result is short and simple:
</p>
<div><div id="highlighter_779740" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">module</code> <code class="ruby plain">RestServiceModule</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">class</code> <code class="ruby plain">HelloService</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby keyword">self</code><code class="ruby plain">.index()</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">return</code> <code class="ruby constants">JSON</code><code class="ruby plain">.generate({</code><code class="ruby color2">:data</code> <code class="ruby plain">=&gt; </code><code class="ruby string">'Hello World'</code><code class="ruby plain">})</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby keyword">self</code><code class="ruby plain">.greet(args)</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">return</code> <code class="ruby constants">JSON</code><code class="ruby plain">.generate({</code><code class="ruby color2">:data</code> <code class="ruby plain">=&gt; </code><code class="ruby string">"Hello #{args.join(' ')}"</code><code class="ruby plain">})</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number11 index10 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
<p>
Since the JSON classes are now being used, a <code>require</code> call is needed at the top as well:
</p>
<div><div id="highlighter_261777" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">require </code><code class="ruby string">'webrick'</code></div><div class="line number2 index1 alt1"><code class="ruby plain">require </code><code class="ruby string">'json'</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="ruby plain">include WEBrick</code></div></div></td></tr></tbody></table></div></div>
<p>
The first is an <code>index</code> class method, which will be used if no method is given. The next is a <code>greet</code>
 class method which takes an array of arguments provided by the URL. 
Finally note how this class is also wrapped in a module. More on why 
that’s important in a moment. Now it’s time for the core logic of the 
REST service:
</p>
<div><div id="highlighter_760369" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">RestServlet &lt; HTTPServlet::AbstractServlet</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">do_GET(req,resp)</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># Split the path into pieces, getting rid of the first slash</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">path = req.path[</code><code class="ruby constants">1</code><code class="ruby plain">..-</code><code class="ruby constants">1</code><code class="ruby plain">].split(</code><code class="ruby string">'/'</code><code class="ruby plain">)</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!RestServiceModule.const_defined?(path[</code><code class="ruby constants">0</code><code class="ruby plain">])</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">response_class = RestServiceModule.const_get(path[</code><code class="ruby constants">0</code><code class="ruby plain">])</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">response_class </code><code class="ruby keyword">and</code> <code class="ruby plain">response_class.is_a?(</code><code class="ruby color1">Class</code><code class="ruby plain">)</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># There was a method given</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">path[</code><code class="ruby constants">1</code><code class="ruby plain">]</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">response_method = path[</code><code class="ruby constants">1</code><code class="ruby plain">].to_sym</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># Make sure the method exists in the class</code></div><div class="line number13 index12 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!response_class.respond_to?(response_method)</code></div><div class="line number14 index13 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># Remaining path segments get passed in as arguments to the method</code></div><div class="line number15 index14 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">path.length &gt; </code><code class="ruby constants">2</code></div><div class="line number16 index15 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(response_method, path[</code><code class="ruby constants">2</code><code class="ruby plain">..-</code><code class="ruby constants">1</code><code class="ruby plain">])</code></div><div class="line number17 index16 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number18 index17 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(response_method)</code></div><div class="line number19 index18 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number20 index19 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::</code><code class="ruby constants">OK</code></div><div class="line number21 index20 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># No method was given, so check for an "index" method instead</code></div><div class="line number22 index21 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number23 index22 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!response_class.respond_to?(</code><code class="ruby color2">:index</code><code class="ruby plain">)</code></div><div class="line number24 index23 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(</code><code class="ruby color2">:index</code><code class="ruby plain">)</code></div><div class="line number25 index24 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::</code><code class="ruby constants">OK</code></div><div class="line number26 index25 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number27 index26 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number28 index27 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound</code></div><div class="line number29 index28 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number30 index29 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number31 index30 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
<p>
Lots of code here, so let’s take it step by step.
</p>
<div><div id="highlighter_329220" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby comments"># Split the path into pieces, getting rid of the first slash</code></div><div class="line number2 index1 alt1"><code class="ruby plain">path = req.path[</code><code class="ruby constants">1</code><code class="ruby plain">..-</code><code class="ruby constants">1</code><code class="ruby plain">].split(</code><code class="ruby string">'/'</code><code class="ruby plain">)</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!RestServiceModule.const_defined?(path[</code><code class="ruby constants">0</code><code class="ruby plain">])</code></div><div class="line number4 index3 alt1"><code class="ruby plain">response_class = RestServiceModule.const_get(path[</code><code class="ruby constants">0</code><code class="ruby plain">])</code></div></div></td></tr></tbody></table></div></div>
<p>
As the comment explains, the first part takes the request path, such <code>/my/request/path</code>, and turns it into an array using the <code>split</code> method of the <code>String</code>
 class. Since a standard split would produce a blank item for the root 
slash, a splice operation is used to get the second character (slices 
start from index 0) to the last character. Now the first part of the URL
 gives us the class. So we need to get the actual class given the string
 name of the class. Since class names are constants which map to the 
actual class, the <code>const_get</code> method can be used to obtain it. However before we use <code>const_get</code>, we need to make sure the const is defined (ie. the class is actually defined). A quick check against <code>const_defined?</code> can be used for that sanity check.
</p>
<p>
Now about the module part. Since the code is set to expect any class, 
the actual class to look for is searched via a specific module 
namespace. This prevents a malicious user from trying to access toplevel
 classes such as <code>File</code>. Note that the module name 
RestServiceModule is not set in stone, and this code could be modified 
to accept another module name instead. This will be looked at in a 
future blog post.
</p>
<div><div id="highlighter_943357" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">if</code> <code class="ruby plain">response_class </code><code class="ruby keyword">and</code> <code class="ruby plain">response_class.is_a?(</code><code class="ruby color1">Class</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>
Now we need to make sure that the first part of the URL path is actually a class. The reason being is that <code>get_const</code> works for all constants, not just ones that map to classes. This is just a minor sanity check.
</p>
<div><div id="highlighter_371009" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby comments"># There was a method given</code></div><div class="line number2 index1 alt1"><code class="ruby keyword">if</code> <code class="ruby plain">path[</code><code class="ruby constants">1</code><code class="ruby plain">]</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">response_method = path[</code><code class="ruby constants">1</code><code class="ruby plain">].to_sym</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby comments"># Make sure the method exists in the class</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!response_class.respond_to?(response_method)</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby comments"># Remaining path segments get passed in as arguments to the method</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">path.length &gt; </code><code class="ruby constants">2</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(response_method, path[</code><code class="ruby constants">2</code><code class="ruby plain">..-</code><code class="ruby constants">1</code><code class="ruby plain">])</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(response_method)</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::</code><code class="ruby constants">OK</code></div></div></td></tr></tbody></table></div></div>
<p>
Next a check is done to see if a method name was given. If one was 
given, the name is first converted to a symbol so we can utilize the <code>respond_to?</code> and <code>send</code> methods for dynamic calling. Next we see if our class actually has such a method. If it doesn’t, a <code>NotFound</code>
 (404) response will be returned. Since the method could have arguments,
 these need to be checked for and passed along. This is accomplished by 
sending the rest of the path array using splicing. If there are no 
arguments, the method is simply called, and finally an OK status (200) 
is returned.
</p>
<div><div id="highlighter_577630" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby comments"># No method was given, so check for an "index" method instead</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!response_class.respond_to?(</code><code class="ruby color2">:index</code><code class="ruby plain">)</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(</code><code class="ruby color2">:index</code><code class="ruby plain">)</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::</code><code class="ruby constants">OK</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number7 index6 alt2"><code class="ruby keyword">else</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound</code></div><div class="line number9 index8 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
<p>
Now if no method was given, we use a default method called <code>index</code>.
 Since no method is provided, that means no arguments were provided 
either, so that check can be skipped. As with before a 404 is returned 
if there is no such method, and a 200 okay with the method result as the
 body is returned if there is such a method. Finally, the else from the 
previous check if the first path piece was a class is set to return a 
404 if it wasn’t. This ends the service mapping code. Now to run a few 
tests:
</p>
<p>HelloService with no method</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-hservice-no-method.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-hservice-no-method.png" alt="" title="HelloService with no method" class="alignnone size-full wp-image-14"></a></p>
<p>HelloService with greet method and no arguments *to be looked into in another blog post</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-hservice-greet-no-arg.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-hservice-greet-no-arg.png" alt="" title="HelloService calling greet method with no args" class="alignnone size-full wp-image-15"></a></p>
<p>HelloService with greet method and one argument</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-hservice-greet-one-arg.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-hservice-greet-one-arg.png" alt="" title="HelloService calling greet method with one argument" class="alignnone size-full wp-image-16"></a></p>
<p>HelloService with greet method and multiple arguments</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-hservice-greet-mult-arg.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-hservice-greet-mult-arg.png" alt="" title="HelloService calling greet method with multiple arguments" class="alignnone size-full wp-image-17"></a></p>
<p>Invalid class</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-invalid-class.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-invalid-class.png" alt="" title="Invalid Class Called" class="alignnone size-full wp-image-18"></a></p>
<p>Invalid method</p>
<p><a href="https://rubyit.files.wordpress.com/2011/07/webrick-invalid-method.png"><img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/webrick-invalid-method.png" alt="" title="Invalid method called" class="alignnone size-full wp-image-19"></a></p>
<p>
This concludes a basic look into a simple RESTful JSON service using 
Webrick, JSON, and class mapping. It’s still far from complete, and in 
future posts we’ll look into how to improve on the following:
</p>
<ul>
<li>The default method to look for is forced to <code>index</code>, and should be customizable</li>
<li>POSTs are not handled</li>
<li>The module to look for classes in should be customizable</li>
<li>No authentication is provided</li>
<li>No validation is done against arguments</li>
<li>Sanity checks on the URL content need to be implemented</li>
<li>The error pages are very generic</li>
<li>Method names have to match the Ruby naming convention, so URLs with dashes won’t work</li>
<li>The code needs to be split up for manageability</li>
</ul>
<p>
The full code listing:</p>
<p></p><div><div id="highlighter_45615" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">require </code><code class="ruby string">'webrick'</code></div><div class="line number2 index1 alt1"><code class="ruby plain">require </code><code class="ruby string">'json'</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="ruby plain">include WEBrick</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="ruby keyword">def</code> <code class="ruby plain">start_webrick(config = {})</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">config.update(:Port =&gt; </code><code class="ruby constants">9955</code><code class="ruby plain">)&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">server = HTTPServer.</code><code class="ruby keyword">new</code><code class="ruby plain">(config)</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">yield</code> <code class="ruby plain">server </code><code class="ruby keyword">if</code> <code class="ruby plain">block_given?</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">[</code><code class="ruby string">'INT'</code><code class="ruby plain">, </code><code class="ruby string">'TERM'</code><code class="ruby plain">].</code><code class="ruby keyword">each</code> <code class="ruby plain">{|signal| </code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">trap(signal) {server.shutdown}</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">}</code></div><div class="line number13 index12 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">server.start</code></div><div class="line number14 index13 alt1"><code class="ruby keyword">end</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="ruby keyword">class</code> <code class="ruby plain">RestServlet &lt; HTTPServlet::AbstractServlet</code></div><div class="line number17 index16 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">do_GET(req,resp)</code></div><div class="line number18 index17 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># Split the path into pieces, getting rid of the first slash</code></div><div class="line number19 index18 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">path = req.path[</code><code class="ruby constants">1</code><code class="ruby plain">..-</code><code class="ruby constants">1</code><code class="ruby plain">].split(</code><code class="ruby string">'/'</code><code class="ruby plain">)</code></div><div class="line number20 index19 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!RestServiceModule.const_defined?(path[</code><code class="ruby constants">0</code><code class="ruby plain">])</code></div><div class="line number21 index20 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">response_class = RestServiceModule.const_get(path[</code><code class="ruby constants">0</code><code class="ruby plain">])</code></div><div class="line number22 index21 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number23 index22 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">response_class </code><code class="ruby keyword">and</code> <code class="ruby plain">response_class.is_a?(</code><code class="ruby color1">Class</code><code class="ruby plain">)</code></div><div class="line number24 index23 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># There was a method given</code></div><div class="line number25 index24 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">path[</code><code class="ruby constants">1</code><code class="ruby plain">]</code></div><div class="line number26 index25 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">response_method = path[</code><code class="ruby constants">1</code><code class="ruby plain">].to_sym</code></div><div class="line number27 index26 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># Make sure the method exists in the class</code></div><div class="line number28 index27 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!response_class.respond_to?(response_method)</code></div><div class="line number29 index28 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># Remaining path segments get passed in as arguments to the method</code></div><div class="line number30 index29 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">path.length &gt; </code><code class="ruby constants">2</code></div><div class="line number31 index30 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(response_method, path[</code><code class="ruby constants">2</code><code class="ruby plain">..-</code><code class="ruby constants">1</code><code class="ruby plain">])</code></div><div class="line number32 index31 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number33 index32 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(response_method)</code></div><div class="line number34 index33 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number35 index34 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::</code><code class="ruby constants">OK</code></div><div class="line number36 index35 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments"># No method was given, so check for an "index" method instead</code></div><div class="line number37 index36 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number38 index37 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound </code><code class="ruby keyword">if</code> <code class="ruby plain">!response_class.respond_to?(</code><code class="ruby color2">:index</code><code class="ruby plain">)</code></div><div class="line number39 index38 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resp.body = response_class.send(</code><code class="ruby color2">:index</code><code class="ruby plain">)</code></div><div class="line number40 index39 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::</code><code class="ruby constants">OK</code></div><div class="line number41 index40 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number42 index41 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number43 index42 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">raise</code> <code class="ruby plain">HTTPStatus::NotFound</code></div><div class="line number44 index43 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number45 index44 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number46 index45 alt1"><code class="ruby keyword">end</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="ruby keyword">module</code> <code class="ruby plain">RestServiceModule</code></div><div class="line number49 index48 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">class</code> <code class="ruby plain">HelloService</code></div><div class="line number50 index49 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby keyword">self</code><code class="ruby plain">.index()</code></div><div class="line number51 index50 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">return</code> <code class="ruby constants">JSON</code><code class="ruby plain">.generate({</code><code class="ruby color2">:data</code> <code class="ruby plain">=&gt; </code><code class="ruby string">'Hello World'</code><code class="ruby plain">})</code></div><div class="line number52 index51 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby keyword">self</code><code class="ruby plain">.greet(args)</code></div><div class="line number55 index54 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">return</code> <code class="ruby constants">JSON</code><code class="ruby plain">.generate({</code><code class="ruby color2">:data</code> <code class="ruby plain">=&gt; </code><code class="ruby string">"Hello #{args.join(' ')}"</code><code class="ruby plain">})</code></div><div class="line number56 index55 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number57 index56 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number58 index57 alt1"><code class="ruby keyword">end</code></div><div class="line number59 index58 alt2">&nbsp;</div><div class="line number60 index59 alt1"><code class="ruby plain">start_webrick { | server |</code></div><div class="line number61 index60 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">server.mount(</code><code class="ruby string">'/'</code><code class="ruby plain">, RestServlet)</code></div><div class="line number62 index61 alt1"><code class="ruby plain">}</code></div></div></td></tr></tbody></table></div></div>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow" class="share-twitter sd-button share-icon" href="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/?share=twitter&amp;nb=1" title="Click to share on Twitter" id="sharing-twitter-6"><span>Twitter<span class="share-count">5</span></span></a></li><li class="share-facebook"><a rel="nofollow" class="share-facebook sd-button share-icon" href="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/?share=facebook&amp;nb=1" title="Share on Facebook" id="sharing-facebook-6"><span>Facebook</span></a></li><li class="share-google-plus-1"><a rel="nofollow" class="share-google-plus-1 sd-button share-icon" href="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/?share=google-plus-1&amp;nb=1" title="Click to share on Google+" id="sharing-google-6"><span>Google</span></a></li><li class="share-end"></li></ul></div></div></div><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-loaded" id="like-post-wrapper-25478531-6-5518b15dd1514" data-src="//widgets.wp.com/likes/#blog_id=25478531&amp;post_id=6&amp;origin=rubyit.wordpress.com&amp;obj_id=25478531-6-5518b15dd1514" data-name="like-post-frame-25478531-6-5518b15dd1514"><h3 class="sd-title">Like this:</h3><div class="likes-widget-placeholder post-likes-widget-placeholder" style="height: 55px; display: none;"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></div><iframe mytubeid="mytube1" class="post-likes-widget jetpack-likes-widget" name="like-post-frame-25478531-6-5518b15dd1514" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/a.html" frameborder="0" height="55px" width="100%"></iframe><span class="sd-text-color"></span><a class="sd-link-color"></a></div></div>			</div>
					</div>
		<!--/post -->

		
<!-- You can start editing here. -->


			<!-- If comments are open, but there are no comments. -->

	 


						<div id="respond" class="comment-respond js">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="https://rubyit.wordpress.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																										


												<input id="highlander_comment_nonce" name="highlander_comment_nonce" value="dc647a10e6" type="hidden"><input name="_wp_http_referer" value="/2011/07/25/basic-rest-server-with-webrick/" type="hidden">
<input name="hc_post_as" id="hc_post_as" value="guest" type="hidden">

<div class="comment-form-field comment-textarea">
	
	<div id="comment-form-comment"><textarea class="autosizejs " tabindex="-1" style="position: absolute; top: -999px; left: 0px; right: auto; bottom: auto; border: 0px none; padding: 0px; box-sizing: content-box; word-wrap: break-word; height: 0px ! important; min-height: 0px ! important; overflow: hidden; transition: none 0s ease 0s ; font-family: Arial,Helvetica,Tahoma,Verdana,sans-serif; font-size: 14px; font-weight: 400; font-style: normal; letter-spacing: 0px; text-transform: none; text-decoration: none; word-spacing: 0px; text-indent: 0px; line-height: 19.6px; width: 498px;">Enter your comment here...</textarea><textarea style="height: 38px; overflow: hidden; word-wrap: break-word; resize: none;" placeholder="Enter your comment here..." id="comment" name="comment" title="Enter your comment here..."></textarea></div>
</div>

<div style="display: none;" id="comment-form-identity">

	<div id="comment-form-nascar">
		<p>Fill in your details below or click an icon to log in:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="#comment-form-guest" id="postas-guest" title="Guest">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:WordPress.com" id="postas-wordpress" title="WordPress.com">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Twitter" id="postas-twitter" title="Twitter">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Facebook" id="postas-facebook" title="Facebook">
					<span></span>
				</a>
			</li>
			<li>
			<iframe mytubeid="mytube2" id="googleplus-sign-in" name="googleplus-sign-in" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/a_002.html" scrolling="no" allowtransparency="true" seamless="seamless" frameborder="0" height="24" width="24"></iframe>
			</li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
<a href="https://gravatar.com/site/signup/" target="_blank">				<img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/02bed14d16954900634cb83771445dc0.jpeg" alt="Gravatar" class="no-grav" width="25">
</a>			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label style="opacity: 0; display: none;" for="email">Email <span class="required">(required)</span> <span class="nopublish">(Address never made public)</span></label>
					<div class="comment-form-input active"><input id="email" name="email" value="kb9agt@gmail.com" type="email"></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label style="opacity: 0; display: none;" for="author">Name <span class="required">(required)</span></label>
					<div class="comment-form-input active"><input id="author" name="author" value="douglas1allen" type="text"></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label style="opacity: 0; display: none;" for="url">Website</label>
					<div class="comment-form-input active"><input id="url" name="url" value="http://myrackapps.herokuapp.com/docs" type="text"></div>
				</div>
			</div>
	
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/wplogo.png" alt="WordPress.com Logo" class="no-grav" width="25">
			</div>

				<div class="comment-form-fields">
				<input name="wp_avatar" id="wordpress-avatar" class="comment-meta-wordpress" value="" type="hidden">
				<input name="wp_user_id" id="wordpress-user_id" class="comment-meta-wordpress" value="" type="hidden">
				<input name="wp_access_token" id="wordpress-access_token" class="comment-meta-wordpress" value="" type="hidden">
				<p class="comment-form-posting-as pa-wordpress"><strong></strong> You are commenting using your WordPress.com account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout(%20'wordpress'%20);">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/ad516503a11cd5ca435acc9bb6523536.png" alt="Twitter picture" class="no-grav" width="25">
			</div>

				<div class="comment-form-fields">
				<input name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="" type="hidden">
				<input name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="" type="hidden">
				<input name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="" type="hidden">
				<p class="comment-form-posting-as pa-twitter"><strong></strong> You are commenting using your Twitter account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout(%20'twitter'%20);">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/ad516503a11cd5ca435acc9bb6523536.png" alt="Facebook photo" class="no-grav" width="25">
			</div>

				<div class="comment-form-fields">
				<input name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="" type="hidden">
				<input name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="" type="hidden">
				<input name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="" type="hidden">
				<p class="comment-form-posting-as pa-facebook"><strong></strong> You are commenting using your Facebook account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout(%20'facebook'%20);">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-googleplus" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/ad516503a11cd5ca435acc9bb6523536.png" alt="Google+ photo" class="no-grav" width="25">
			</div>

				<div class="comment-form-fields">
				<input name="googleplus_avatar" id="googleplus-avatar" class="comment-meta-googleplus" value="" type="hidden">
				<input name="googleplus_user_id" id="googleplus-user_id" class="comment-meta-googleplus" value="" type="hidden">
				<input name="googleplus_access_token" id="googleplus-access_token" class="comment-meta-googleplus" value="" type="hidden">
				<p class="comment-form-posting-as pa-googleplus"><strong></strong> You are commenting using your Google+ account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout(%20'googleplus'%20);">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service">
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Cancel</a></div>
		<p>Connecting to %s</p>
	</div>

</div>

<script type="text/javascript">
var highlander_expando_javascript = function(){
	var input = document.createElement( 'input' ),
	    comment = jQuery( '#comment' );

	if ( 'placeholder' in input ) {
		comment.attr( 'placeholder', jQuery( '.comment-textarea label' ).remove().text() );
	}

	// Expando Mode: start small, then auto-resize on first click + text length
	jQuery( '#comment-form-identity' ).hide();
	jQuery( '#comment-form-subscribe' ).hide();
	jQuery( '#commentform .form-submit' ).hide();

	comment.css( { 'height':'10px' } ).one( 'focus', function() {
		var timer = setInterval( HighlanderComments.resizeCallback, 10 )
		jQuery( this ).animate( { 'height': HighlanderComments.initialHeight } ).delay( 100 ).queue( function(n) { clearInterval( timer ); HighlanderComments.resizeCallback(); n(); } );
		jQuery( '#comment-form-identity' ).slideDown();
		jQuery( '#comment-form-subscribe' ).slideDown();
		jQuery( '#commentform .form-submit' ).slideDown();
	});
}
jQuery(document).ready( highlander_expando_javascript );
</script>

<div style="display: none;" id="comment-form-subscribe">
	<p class="comment-subscription-form"><input name="subscribe" id="subscribe" value="subscribe" style="width: auto;" tabindex="6" type="checkbox"> <label class="subscribe-label" id="subscribe-label" for="subscribe" style="display: inline;">Notify me of new comments via email.</label></p></div>

												<p style="display: none;" class="form-submit">
							<input name="submit" id="comment-submit" class="submit" value="Post Comment" type="submit">
							<input name="comment_post_ID" value="6" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
						</p>
						<p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" value="48bf48fb0f" type="hidden"></p>
<input name="genseq" value="1427681629" type="hidden">
<p style="display: none;"></p>					<input id="ak_js" name="ak_js" value="1427681634560" type="hidden"></form>
							</div><!-- #respond -->
			<div style="clear: both"></div>

		<p class="post-nav">
			<span class="previous">
							</span>
			<span class="next">
				<a href="https://rubyit.wordpress.com/2011/07/25/ruby-and-argf/" rel="next">Ruby and ARGF</a>			</span>
		</p>

	

	</div>
	<!--/content -->

	<div id="sidebar">
	

		 <div class="widget widget_search"><form method="get" id="searchform" action="https://rubyit.wordpress.com/">
	<input value="Search..." name="s" id="s" type="text">
	<input id="searchsubmit" type="hidden">
</form></div>
		<div class="widget">
			<h4>
				Pages			</h4>
			<ul>
							</ul>
		</div>

		<div class="widget">
			<h4>
				Category			</h4>
			<ul>
					<li class="cat-item cat-item-72511"><a href="https://rubyit.wordpress.com/category/core/">Core</a> (2)
</li>
	<li class="cat-item cat-item-19551"><a href="https://rubyit.wordpress.com/category/documentation/">Documentation</a> (2)
</li>
	<li class="cat-item cat-item-151"><a href="https://rubyit.wordpress.com/category/web/">Web</a> (1)
</li>
			</ul>
		</div>

		<div class="widget">
			<h4>
				Archives			</h4>
			<ul>
					<li><a href="https://rubyit.wordpress.com/2011/07/">July 2011</a></li>
			</ul>
		</div>


	</div>
	<!--/sidebar --></div>
<!--/wrapper -->

<div id="footer">
	<p class="generator">
		<a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com</a>.
	</p>
	<p class="credits">
		<a href="https://wordpress.com/themes/notepad/" title="Learn more about this theme">The Notepad Theme</a>.	</p>
</div>
<!--/footer -->

</div>
<!--/pagewrapper -->

<script type="text/javascript">
/* <![CDATA[ */
if(document.getElementById("s")) {
	document.getElementById("s").onfocus = function() {
		if (this.value == "Search...")
			this.value = "";
	}
	document.getElementById("s").onblur = function() {
		if (this.value == '')
			this.value = "Search...";
	}
}
/* ]]> */
</script>

<!-- wpcom_wp_footer -->
<script type="text/javascript" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":"02bed14d16954900634cb83771445dc0"};
/* ]]> */
</script>
<script type="text/javascript" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/wpgroho.js"></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	</div>
<script type="text/javascript">
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"https:\/\/rubyit.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/rubyit.wordpress.com\/wp-login.php?action=logout&_wpnonce=4220b4c27c","homeURL":"https:\/\/rubyit.wordpress.com\/","postID":"6","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"0","userIsLoggedIn":"","isJetpack":"0","text_direction":"ltr"};
/* ]]> */
</script>
<script type="text/javascript" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/a_003.js"></script>

	<div style="bottom: -257px;" id="bit" class="loggedout-follow-normal">
		<a class="bsub" href="javascript:void(0)"><span id="bsub-text">Follow</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow “Ruby It!”</label></h3>

			<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>

			
			<p><input name="email" value="Enter your email address" onfocus='this.value=(this.value=="Enter your email address") ? "" : this.value;' onblur='this.value=(this.value=="") ? "Enter your email address" : this.value;' id="loggedout-follow-field" type="email"></p>

			<input name="action" value="subscribe" type="hidden">
			<input name="blog_id" value="25478531" type="hidden">
			<input name="source" value="https://rubyit.wordpress.com/2011/07/25/basic-rest-server-with-webrick/" type="hidden">
			<input name="sub-type" value="loggedout-follow" type="hidden">

			<input id="_wpnonce" name="_wpnonce" value="c253e6a2c2" type="hidden"><input name="_wp_http_referer" value="/2011/07/25/basic-rest-server-with-webrick/" type="hidden">
			<p id="bsub-subscribe-button"><input value="Sign me up" type="submit"></p>
			</form>
					<div id="bsub-credit"><a href="https://wordpress.com/?ref=lof">Build a website with WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->

	<script type="text/javascript">
		WPCOM_sharing_counts = {"https:\/\/rubyit.wordpress.com\/2011\/07\/25\/basic-rest-server-with-webrick\/":6}	</script>
		<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-twitter' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-facebook' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-google-plus-1' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
		});
		</script>
				<iframe mytubeid="mytube3" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/master.html" scrolling="no" id="likes-master" name="likes-master" style="display:none;"></iframe>
		<div id="likes-other-gravatars"><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
		<script type="text/javascript">
		//<![CDATA[
			var jetpackLikesWidgetQueue = [];
			var jetpackLikesWidgetBatch = [];
			var jetpackLikesMasterReady = false;

			function JetpackLikespostMessage( message, target ) {
				if ( "string" === typeof message ){
					try{
						message = JSON.parse( message );
					}
					catch(e) {
						return;
					}
				}

				pm( {
					target: target,
					type: 'likesMessage',
					data: message,
					origin: '*'
				} );
			}

			function JetpackLikesBatchHandler() {
				var requests = [];
				jQuery( 'div.jetpack-likes-widget-unloaded' ).each( function( i ) {
					if ( jetpackLikesWidgetBatch.indexOf( this.id ) > -1 )
						return;
					jetpackLikesWidgetBatch.push( this.id );
					var regex = /like-(post|comment)-wrapper-(\d+)-(\d+)-(\w+)/;
					var match = regex.exec( this.id );
					if ( ! match || match.length != 5 )
						return;

					var info = {
						blog_id: match[2],
						width:   this.width
					};

					if ( 'post' == match[1] ) {
						info.post_id = match[3];
					} else if ( 'comment' == match[1] ) {
						info.comment_id = match[3];
					}

					info.obj_id = match[4];

					requests.push( info );
				});

				if ( requests.length > 0 ) {
					JetpackLikespostMessage( { event: 'initialBatch', requests: requests }, window.frames['likes-master'] );
				}
			}

			function JetpackLikesMessageListener( event ) {
				if ( "undefined" == typeof event.event )
					return;

				if ( 'masterReady' == event.event ) {
					jQuery( document ).ready( function() {
						jetpackLikesMasterReady = true;

						var stylesData = {
								event: 'injectStyles'
						};

						if ( jQuery( 'iframe.admin-bar-likes-widget' ).length > 0 ) {
							JetpackLikespostMessage( { event: 'adminBarEnabled' }, window.frames[ 'likes-master' ] );

							stylesData.adminBarStyles = {
								background: jQuery( '#wpadminbar .quicklinks li#wp-admin-bar-wpl-like > a' ).css( 'background' ),
								isRtl: ( 'rtl' == jQuery( '#wpadminbar' ).css( 'direction' ) )
							};
						}

						if ( !window.addEventListener )
							jQuery( '#wp-admin-bar-admin-bar-likes-widget' ).hide();

						stylesData.textStyles = {
							color: jQuery( '.sd-text-color').css( 'color' ),
							fontFamily: jQuery( '.sd-text-color' ).css( 'font-family' ),
							fontSize: jQuery( '.sd-text-color' ).css( 'font-size' ),
							direction: jQuery( '.sd-text-color' ).css( 'direction' ),
							fontWeight: jQuery( '.sd-text-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-text-color' ).css( 'font-style' ),
							textDecoration: jQuery( '.sd-text-color' ).css('text-decoration')
						};

						stylesData.linkStyles = {
							color: jQuery( '.sd-link-color' ).css('color'),
							fontFamily: jQuery( '.sd-link-color' ).css('font-family'),
							fontSize: jQuery( '.sd-link-color' ).css('font-size'),
							textDecoration: jQuery( '.sd-link-color' ).css('text-decoration'),
							fontWeight: jQuery( '.sd-link-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-link-color' ).css( 'font-style' )
						};

						JetpackLikespostMessage( stylesData, window.frames[ 'likes-master' ] );

						JetpackLikesBatchHandler();

						jQuery( document ).on( 'inview', 'div.jetpack-likes-widget-unloaded', function() {
							jetpackLikesWidgetQueue.push( this.id );
						});
					});
				}

				if ( 'showLikeWidget' == event.event ) {
					jQuery( '#' + event.id + ' .post-likes-widget-placeholder'  ).fadeOut( 'fast', function() {
						jQuery( '#' + event.id + ' .post-likes-widget' ).fadeIn( 'fast', function() {
							JetpackLikespostMessage( { event: 'likeWidgetDisplayed', blog_id: event.blog_id, post_id: event.post_id, obj_id: event.obj_id }, window.frames['likes-master'] );
						});
					});
				}

				if ( 'clickReblogFlair' == event.event ) {
					wpcom_reblog.toggle_reblog_box_flair( event.obj_id );
				}

				if ( 'showOtherGravatars' == event.event ) {
					var $container = jQuery( '#likes-other-gravatars' );
					var $list = $container.find( 'ul' );

					$container.hide();
					$list.html( '' );

					$container.find( '.likes-text span' ).text( event.total );

					jQuery.each( event.likers, function( i, liker ) {
						$list.append( '<li class="' + liker.css_class + '"><a href="' + liker.profile_URL + '" class="wpl-liker" rel="nofollow" target="_parent"><img src="' + liker.avatar_URL + '" alt="' + liker.name + '" width="30" height="30" style="padding-right: 3px;" /></a></li>');
					} );

					var offset = jQuery( "[name='" + event.parent + "']" ).offset();

					$container.css( 'left', offset.left + event.position.left - 10 + 'px' );
					$container.css( 'top', offset.top + event.position.top - 33 + 'px' );

					var rowLength = Math.floor( event.width / 37 );
					var height = ( Math.ceil( event.likers.length / rowLength ) * 37 ) + 13;
					if ( height > 204 ) {
						height = 204;
					}

					$container.css( 'height', height + 'px' );
					$container.css( 'width', rowLength * 37 - 7 + 'px' );

					$list.css( 'width', rowLength * 37 + 'px' );

					$container.fadeIn( 'slow' );

					var scrollbarWidth = $list[0].offsetWidth - $list[0].clientWidth;
					if ( scrollbarWidth > 0 ) {
						$container.width( $container.width() + scrollbarWidth );
						$list.width( $list.width() + scrollbarWidth );
					}
				}
			}

			pm.bind( 'likesMessage', function(e) { JetpackLikesMessageListener(e); } );

			jQuery( document ).click( function( e ) {
				var $container = jQuery( '#likes-other-gravatars' );

				if ( $container.has( e.target ).length === 0 ) {
					$container.fadeOut( 'slow' );
				}
			});

			function JetpackLikesWidgetQueueHandler() {
				var wrapperID;
				if ( ! jetpackLikesMasterReady ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				if ( jetpackLikesWidgetQueue.length > 0 ) {
					// We may have a widget that needs creating now
					var found = false;
					while( jetpackLikesWidgetQueue.length > 0 ) {
						// Grab the first member of the queue that isn't already loading.
						wrapperID = jetpackLikesWidgetQueue.splice( 0, 1 )[0];
						if ( jQuery( '#' + wrapperID ).hasClass( 'jetpack-likes-widget-unloaded' ) ) {
							found = true;
							break;
						}
					}
					if ( ! found ) {
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				} else if ( jQuery( 'div.jetpack-likes-widget-unloaded' ).length > 0 ) {
					// Grab any unloaded widgets for a batch request
					JetpackLikesBatchHandler();

					// Get the next unloaded widget
					wrapperID = jQuery( 'div.jetpack-likes-widget-unloaded' ).first()[0].id;
					if ( ! wrapperID ) {
						// Everything is currently loaded
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				}

				if ( 'undefined' === typeof wrapperID ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				var $wrapper = jQuery( '#' + wrapperID );
				$wrapper.find( 'iframe' ).remove();

				if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='22px' width='68px' frameBorder='0' scrolling='no' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				} else {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='55px' width='100%' frameBorder='0' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				}

				$wrapper.removeClass( 'jetpack-likes-widget-unloaded' ).addClass( 'jetpack-likes-widget-loading' );

				$wrapper.find( 'iframe' ).load( function( e ) {
					var $iframe = jQuery( e.target );
					$wrapper.removeClass( 'jetpack-likes-widget-loading' ).addClass( 'jetpack-likes-widget-loaded' );

					JetpackLikespostMessage( { event: 'loadLikeWidget', name: $iframe.attr( 'name' ), width: $iframe.width() }, window.frames[ 'likes-master' ] );

					if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
						$wrapper.find( 'iframe' ).Jetpack( 'resizeable' );
					}
				});
				setTimeout( JetpackLikesWidgetQueueHandler, 250 );
			}
			JetpackLikesWidgetQueueHandler();
		//]]>
		</script>
<script type="text/javascript" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/form.js"></script>
<script type="text/javascript" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/a_002.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414g&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript">
/* <![CDATA[ */
var JetpackEmojiSettings = {"base_url":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/emoji\/twemoji\/"};
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/a_004.js"></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/w.js" type="text/javascript" async="" defer="defer"></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'25478531','blog_tz':'0','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'25478531','v':'wpcom','tz':'0','user_id':'0','post':'6','subd':'rubyit'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1xSCVfV1JPZjFvWzR5Y0oyMThhb0oxZXZKM2lDQnBqVS1dU09ZckxkRmF2TXB5TkpOdTluSmxpRURYP3RreDM9N3clMjE4X2lUdGN1ak1tTjBSTWNTbDF6cTFbcC0ubzArW0NVMWhMW2h4ci18N0E4T1BdZUdHQ2R6ZnlCMy1vWkRFZ3xDVy1tTix5WGF1XUE4Uk5XcFcsaVgzY3ZHfDU2cmUrNTAseGthS1s5VFhJUEFYZk5paD0yUT0tT1J8KzEzd0dhc0wyM255UFNuaFNsd1pCN3BbcU1aTD1iQ3ZsX05DUXwmWEM5R2pqPUt0dFQ/dUZRS1djWzlady58OU8vZWVmbUdmLXJZYlEmJWVLfC5fWUowTj1QfnJYcUY5'}]);
_stq.push([ 'clickTrackerInit', '25478531', '6' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>
<img id="wpstats" src="Basic%20REST%20Server%20With%20Webrick%20%7C%20Ruby%20It%21_files/g.gif"></body></html>